<body class="page-specific-body-class">
  <div class="background-network">
    <div class="top-producteur nom">
      <h1><%= @network.name %></h1>
    </div>

    <div class="container_producteur">
      <div class="show_producteur">
        <% @network_farmers.each do |farmer| %>
          <div class="show_pdt shadow">
            <%= cl_image_tag farmer.photo.last.key %>
            <div style="margin-top: 10px; margin-bottom: 10px;">
              <%= farmer.name %>
            </div>
          </div>
        <% end %>
      </div>
    </div>

    <div class="container-produit-network">
      <% @network_farmers.each do |farmer| %>
        <% farmer.ingredients.each do |ingredient| %>
          <div class="card-product-network">
            <div class="photo-produits shadow">
              <%= cl_image_tag ingredient.photo.first.key, height: 100, width: 100 %>
            </div>

            <div class="dnd p-3 mt-2 text-center shadow">
              <h5><%= ingredient.name %></h5>
              <h5>Prix : <%= ingredient.price %>â‚¬</h5>

<%= simple_form_for @cart_item, url: carts_items_path(network_id: farmer.network, ingredient_id: ingredient), html: { class: 'simple-form' } do |f| %>
  <div class="form_product_quantity" style="display: flex; align-items: center;">
    <button type="button" onclick="decrementQuantity('<%= f.object_id %>')" class="quantity-modifier quantity-decrement tamereettonpere">-</button>
<%= f.input :quantity, as: :numeric, input_html: { id: "quantity_#{f.object_id}", value: 1, min: 1, class: 'quantity-input', style: "border: 0; outline: none; background-color: transparent; text-align: center; font-size: 20px;" }, label: false %>

    <button type="button" onclick="incrementQuantity('<%= f.object_id %>')" class="quantity-modifier quantity-increment tamereettonpere">+</button>
  </div>
  <%= f.button :submit, "Ajouter au panier", class: "tamere" %>
<% end %>

            </div>
          </div>
        <% end %>
      <% end %>
    </div>
  </div>
</body>



<script>
  function incrementQuantity(formId) {
    var input = document.getElementById("quantity_" + formId);
    var value = parseInt(input.value);
    input.value = value + 1;
  }

  function decrementQuantity(formId) {
    var input = document.getElementById("quantity_" + formId);
    var value = parseInt(input.value);
    if (value > 1) {
      input.value = value - 1;
    }
  }
</script>
